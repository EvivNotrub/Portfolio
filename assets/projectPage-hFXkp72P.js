import{p as g,j as e,F as _,P as x,r as t,c as z,d as L,b as T,a as I,S as N}from"./index-kKWqxeeT.js";import{i as v,p as b}from"./imageRenderSizes-JRJ5KxC7.js";import{g as P,A as R}from"./Accordion-d0EH9i5S.js";function S({next:i,previous:o}){return e.jsx("div",{className:"slideshow__arrows",children:e.jsxs("div",{className:"buttonSlider",children:[e.jsx("button",{type:"button",onClick:()=>{o()},className:"buttonSlider__arrow --left","aria-label":"previous slide",children:e.jsx(_,{className:"svg",icon:"fa-solid fa-chevron-left"})}),e.jsx("button",{type:"button",onClick:()=>{i()},className:"buttonSlider__arrow --right","aria-label":"next slide",children:e.jsx(_,{className:"svg",icon:"fa-solid fa-chevron-right"})})]})})}S.propTypes={next:g.PropTypes.func,previous:g.PropTypes.func};function F({pictures:i,currentPicture:o,previousPicture:l,nextPicture:m,classFullscreen:s}){return i.map((r,d)=>{let a;switch(d){case o:a=" --current";break;case m:a=" --next";break;case l:a=" --previous";break;default:a=""}if(v&&r.src){const n=r.src,h=n.replace(/\.[^/\\.]+$/,"/"),p=n.substr(n.lastIndexOf("/")+1).replace(/\.[^/\\.]+$/,""),f=v.find(c=>c.fileName===p);if(f){const c=f.fileSizes.map(w=>h+p+"-"+w.sizeName+".webp "+w.size+"w").join(", ");r.srcset=c}}return e.jsx("img",{className:"slideshow__picture"+a+s,id:d,src:r.src,sizes:"(min-width: 1280px) 936px, (min-width: 960px) 836px, (min-width: 540px) 90vw, 100vw",srcSet:r.srcset?r.srcset:null,alt:r.alt,loading:a===" --current"?"eager":"lazy"},r.src+d)})}function y({isFullscreen:i,setIsFullscreen:o}){return e.jsx("button",{className:"slideshow__footer__viewbutton",onClick:()=>{o(!i)},"aria-label":"toggle fullscreen button",children:i?e.jsx(_,{icon:"fa-solid fa-compress"}):e.jsx(_,{icon:"fa-solid fa-expand"})})}y.propTypes={isFullscreen:g.PropTypes.bool,setIsFullscreen:g.PropTypes.func};function E({pictures:i,isFullscreen:o,setIsFullscreen:l,classFullscreen:m}){const[s,r]=t.useState(0),[d,a]=t.useState(i.length-1),[n,h]=t.useState(1),u=i.length;t.useEffect(()=>{function f(c){c.key==="Escape"&&o&&l(!1)}return document.addEventListener("keydown",c=>f(c)),()=>{document.removeEventListener("keydown",c=>f(c))}},[o,l]);function p(f){f==="next"?(a(s),r(n),h(n+1===u?0:n+1)):(a(d-1===-1?u-1:d-1),r(d),h(s))}return e.jsxs("div",{className:"slideshow"+m,children:[u>1&&e.jsx(S,{next:()=>{p("next")},previous:()=>{p({direction:"previous"})}}),e.jsx(F,{pictures:i,currentPicture:s,previousPicture:d,nextPicture:n,classFullscreen:m}),e.jsxs("div",{className:"slideshow__footer",children:[e.jsx("div",{className:"slideshow__footer__ghost"}),u>1&&e.jsx("h2",{className:"slideshow__footer__count",children:s+1+"/"+u}),e.jsx(y,{isFullscreen:o,setIsFullscreen:l})]})]})}E.propTypes={pictures:x.arrayOf(x.shape({src:x.string.isRequired,alt:x.string.isRequired})).isRequired,isFullscreen:x.bool,setIsFullscreen:x.func,classFullscreen:x.string};function D(){const[i,o]=t.useState(!1),l=i?" --fullscreen":" --normalview",{projectID:m}=z(),[s,r]=t.useState(null),[d,a]=t.useState(!0),[n,h]=t.useState(null),u=L(),[p,f]=t.useState(P()),[c,w]=t.useState(!1);if(t.useEffect(()=>{function j(){f(P())}return window.addEventListener("resize",j),p.innerWidth<768?w(!1):w(!0),()=>{window.removeEventListener("resize",j)}},[p]),t.useEffect(()=>{if(s){document.title="Project: "+s.name;return}document.title="My Work"},[s]),t.useEffect(()=>{if(b){const j=b.projects.find(k=>k.id===m);if(!j){h(new Error("No Project found")),a(!1);return}r(j),a(!1)}},[m]),t.useEffect(()=>{if(n){const j=setTimeout(()=>{u("/projects")},5e3);return()=>{clearTimeout(j)}}},[n,u]),d)return e.jsx("main",{className:"project-loading",children:e.jsx(T,{})});if(n)return e.jsx("main",{className:"project-page-error",children:e.jsxs("section",{children:[e.jsx("h1",{children:"Error"}),e.jsx("p",{children:n.message}),e.jsx("p",{children:"Page will redirect to Portfolio page."})]})});if(s)return e.jsxs("main",{"data-testid":"projectpage-testid",className:"project-info",children:[e.jsxs("section",{className:"project-info__major",children:[e.jsx("div",{className:"project-info__major__slide",children:e.jsx(E,{pictures:s.pictures,classFullscreen:l,setIsFullscreen:o,isFullscreen:i})}),e.jsxs("div",{className:"project-info__major__description",children:[e.jsx("h1",{className:"project-info__major__title "+l,children:s.name}),e.jsx("div",{className:"project-info__major__links "+l,children:e.jsxs(I,{children:[s.links.github&&e.jsx(N,{link:s.links.github,text:"GitHub",children:e.jsx(_,{icon:"fa-brands fa-github"})}),s.links.demo&&e.jsx(N,{link:s.links.demo,text:"GitHub Pages",children:e.jsx(_,{icon:"fa-solid fa-globe"})})]})})]})]}),e.jsxs("section",{className:"project-info__details "+l,children:[e.jsxs("article",{className:"project-info__details__summary",children:[e.jsx("h2",{className:"project-info__details__summary__title",children:"In a nutshell:"}),e.jsx("p",{children:s.summary.EN}),e.jsx("h3",{children:"Aim:"}),e.jsx("p",{children:s.aim.EN})]}),e.jsx(R,{title:"Full Description",datum:s.description.EN,className:"project-info__details__description",expanded:c})]})]})}export{D as default};
